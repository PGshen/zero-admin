webpackJsonp([40],{"2CU8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("Dd8w"),n=i.n(l),a=i("NYxO"),r={data:function(){return{orgProps:{children:"children",label:"label"},listQuery:{page:1,rows:20,sidx:void 0,sord:"+id"},total:null,treeItem:"",displayList:null,listLoading:!1,sortOptions:[{label:"按ID升序列",key:"+id"},{label:"按ID降序",key:"-id"}],tableKey:0,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},org:{id:"",orgPath:"",orgName:"",orgNo:"",orgDesc:""}}},created:function(){this.getOrgTree(),this.getOrgList()},computed:n()({},Object(a.c)(["orgTree","orgList"])),methods:n()({},Object(a.b)({GetOrgTree:"GetOrgTree",GetOrgList:"GetOrgList"}),{getOrgTree:function(){var t=this;this.GetOrgTree().then(function(e){e||t.$notify({title:"失败",message:"获取菜单结构失败",type:"failure",duration:2e3})})},getOrgList:function(){var t=this;this.listLoading=!0,this.GetOrgList().then(function(e){e?t.listLoading=!1:(t.listLoading=!1,t.$notify({title:"失败",message:"获取当前路径下菜单失败",type:"failure",duration:2e3}))})},handleFilter:function(){this.dialogStatus=""},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0},handleDownload:function(){this.dialogStatus=""},handleSizeChange:function(t){this.listQuery.limit=t},handlePageChange:function(t){this.listQuery.page=t},create:function(){this.dialogStatus=""},update:function(){this.dialogStatus=""},handleNodeClick:function(t){this.treeItem=t.label},getOrgItem:function(t,e){var i=this;if(void 0===e||null===e)return null;var l=null;return e.forEach(function(e,n){if(t===e.orgName)l=e.children;else{var a=null;null!==e.children&&null!==(a=i.getOrgItem(t,e.children))&&(l=a)}}),l}}),watch:{treeItem:function(t){null!==t&&(this.displayList=null,this.displayList=this.getOrgItem(t,this.orgList))}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container org-container"},[i("div",{staticClass:"left-bar"},[i("el-card",{staticStyle:{"min-height":"100%"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"10px"}},[t._v("组织结构")])]),t._v(" "),i("el-tree",{attrs:{data:t.orgTree,props:t.orgProps,"highlight-current":!0,accordion:""},on:{"node-click":t.handleNodeClick}})],1)],1),t._v(" "),i("div",{staticClass:"right-content"},[i("el-card",{staticStyle:{"min-height":"100%"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"10px"}},[t._v("组织列表")])]),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"组织名称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"排序"},on:{change:t.handleFilter},model:{value:t.listQuery.sord,callback:function(e){t.$set(t.listQuery,"sord",e)},expression:"listQuery.sord"}},t._l(t.sortOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})})),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:t.handleCreate}},[t._v("\n            添加\n          ")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"document"},on:{click:t.handleDownload}},[t._v("导出")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.displayList,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"组织名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){t.handleUpdate(e.row)}}},[t._v(t._s(e.row.orgName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"组织编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.orgNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"组织类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.orgType))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"组织描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.orgDesc))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){t.handleUpdate(e.row)}}},[t._v("编辑\n              ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("禁用\n              ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("重置密码\n              ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除\n              ")])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],"close-on-click-modal":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticClass:"small-space org-form",attrs:{inline:!0,model:t.org,"label-position":"left","label-width":"70px"}},[i("el-form-item",{staticClass:"org-form-item",attrs:{label:"组织路径"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入组织名称"},model:{value:t.org.orgPath,callback:function(e){t.$set(t.org,"orgPath",e)},expression:"org.orgPath"}})],1),t._v(" "),i("el-form-item",{staticClass:"org-form-item",attrs:{label:"组织名称"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入组织名称"},model:{value:t.org.orgName,callback:function(e){t.$set(t.org,"orgName",e)},expression:"org.orgName"}})],1),t._v(" "),i("el-form-item",{staticClass:"org-form-item",attrs:{label:"组织编号"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入组织编号"},model:{value:t.org.orgNo,callback:function(e){t.$set(t.org,"orgNo",e)},expression:"org.orgNo"}})],1),t._v(" "),i("el-form-item",{staticClass:"org-form-item",attrs:{label:"组织类型"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入组织类型"},model:{value:t.org.orgType,callback:function(e){t.$set(t.org,"orgType",e)},expression:"org.orgType"}})],1),t._v(" "),i("el-form-item",{staticClass:"org-form-item",attrs:{label:"组织描述"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入组织描述"},model:{value:t.org.orgDesc,callback:function(e){t.$set(t.org,"orgDesc",e)},expression:"org.orgDesc"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)],1)],1)])],1)])},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("N89E")},null,null);e.default=s.exports},Dhd5:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n.org-container {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  height: 100%;\n  width: 100%;\n}\n.org-container .left-bar {\n  height: 100%;\n  -webkit-box-flex: 2;\n      -ms-flex: 2;\n          flex: 2;\n}\n.org-container .left-bar .el-tree--highlight-current .el-tree-node.is-current > .el-tree-node__content {\n  background-color: lightblue;\n}\n.org-container .left-bar .el-tree {\n  border: 0;\n}\n.org-container .right-content {\n  height: 100%;\n  -webkit-box-flex: 8;\n      -ms-flex: 8;\n          flex: 8;\n  margin-left: 20px;\n}\n.org-container .right-content .org-form {\n  width: 92%;\n  margin-left: 8%;\n}\n.org-container .right-content .org-form .org-form-item {\n  width: 46%;\n  margin-right: 20px;\n}\n/* 覆盖掉原先el-form-item__content样式，使得内容宽度占满父元素 */\n.org-container .right-content .org-form .org-form-item .el-form-item__content {\n  display: inline-block;\n  vertical-align: top;\n  width: 73%;\n}\n',""])},N89E:function(t,e,i){var l=i("Dhd5");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);i("rjj0")("79cc5ec8",l,!0)}});